<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta name="generator" content="Hugo 0.155.3" />
  <meta charset="utf-8">
  <title>常用的设计模式 · Helio</title><meta name="referrer" content="no-referrer" />
<meta data-draft-node="block" data-draft-type="table" data-size="normal" data-row-style="normal">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="@[toc] #设计模式
##单例模式
Double Check Lock public static Singleton getInstance(){ if(mInstance == null){ synchronized(Singleton.class){ if(mInstance == null){ mInstance = new Singleton(); } } } retuen mInstance; } 静态内部类 public static Singleton getInstance(){ retuen SingletonHolder.sInstance; } private static class SingletonHolder{ private static final Singleton sInstance = new Singleton(); } ​
##Builder模式
存储参数 设置参数，return this new 对象，传递参数 返回 ##原型模式
" />


<link rel="canonical" href="https://justinbetter.github.io/2017/05/28/%E5%B8%B8%E7%94%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" />

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
<link rel="stylesheet" href="https://justinbetter.github.io/css/den.css">
<link rel="stylesheet" href="https://justinbetter.github.io/css/custom.css">







</head>
<body>
  
  <div class="header-container gradient">
  <div class="container">
  <nav class="header-nav navbar navbar-expand-md navbar-dark light-dark">
    <div class="header-logo navbar-brand">
      
        <a class="float-left" href="https://justinbetter.github.io/">
      
        
        
          Helio
         
      </a>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="nav-menu collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        
          <li class="nav-item">
            
              
                <a class="nav-link" href="https://justinbetter.github.io/category/notes/">Notes</a>
              
            
          </li>
        
          <li class="nav-item">
            
              
                <a class="nav-link" href="https://justinbetter.github.io/category/demos/">Demos</a>
              
            
          </li>
        
          <li class="nav-item">
            
              <a class="nav-link" href="https://justinbetter.github.io/about/">About</a>
            
          </li>
        
        
      </ul>
    </div>
  </nav>
</div>

<div class="container header-wrapper">
  <div class="row">
    <div class="col-lg-12">
      <div class="header-content">
        <h1 class="header-title">常用的设计模式</h1>
        <p class="header-date">
        Sun 28 May 2017
        <div class="header-underline"></div>
        
        

      </div>
    </div>
  </div>
</div>

  </div>
  <main>
<div class="container content">
  <article>
  <p>@[toc]
#设计模式</p>
<p>##单例模式</p>
<ul>
<li>Double Check Lock</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> Singleton <span style="color:#a6e22e">getInstance</span>(){
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span>(mInstance <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">synchronized</span>(Singleton.<span style="color:#a6e22e">class</span>){
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span>(mInstance <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span>){
</span></span><span style="display:flex;"><span>        mInstance <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Singleton();
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  retuen mInstance;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>静态内部类</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> Singleton <span style="color:#a6e22e">getInstance</span>(){
</span></span><span style="display:flex;"><span>    retuen SingletonHolder.<span style="color:#a6e22e">sInstance</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SingletonHolder</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> Singleton sInstance <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Singleton();
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div><p>​</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3VwbG9hZC1pbWFnZXMuamlhbnNodS5pby91cGxvYWRfaW1hZ2VzLzI3ODA5ODctNjBjYmI1YjliZjk1Y2YxOS5wbmc?x-oss-process=image/format,png" alt="Paste_Image.png"></p>
<p>##Builder模式</p>
<ol>
<li>存储参数</li>
<li>设置参数，return this</li>
<li>new 对象，传递参数</li>
<li>返回</li>
</ol>
<p>##原型模式</p>
<ul>
<li>使用
<ul>
<li>重写clone()</li>
<li>浅拷贝：拷贝对象无法修改原型对象的字段，保证了安全性（除了引用型字段，多以也要拷贝引用性字段）</li>
<li>深拷贝： 对拷贝对象的引用型字段也要拷贝</li>
</ul>
</li>
</ul>
<h2 id="工厂方法模式">工厂方法模式</h2>
<pre tabindex="0"><code>//抽象产品类
public abstract class Dialog(){
  public abstract void show();
}

public class DialogA extends Dialog{
  @Override
  public void show(){
    //showA
  }
}
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">//抽象工厂</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Factory</span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">abstract</span> <span style="color:#f92672">&lt;</span>T <span style="color:#66d9ef">extends</span> Dialog<span style="color:#f92672">&gt;</span>T <span style="color:#a6e22e">createDialog</span>(Class<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> clazz);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DialogAFactory</span> <span style="color:#66d9ef">extends</span> Factory{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#f92672">&lt;</span>T <span style="color:#66d9ef">extends</span> Dialog<span style="color:#f92672">&gt;</span>T <span style="color:#a6e22e">createDialog</span>(Class<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> clazz){
</span></span><span style="display:flex;"><span>    Dialog dialog <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>{
</span></span><span style="display:flex;"><span>      dialog <span style="color:#f92672">=</span> (Dialog)Class.<span style="color:#a6e22e">forName</span>(clazz.<span style="color:#a6e22e">getName</span>()).<span style="color:#a6e22e">newInstance</span>();
</span></span><span style="display:flex;"><span>    }<span style="color:#66d9ef">catch</span>(Exception e){
</span></span><span style="display:flex;"><span>      ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> (T)dialog;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>} 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//使用</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args){
</span></span><span style="display:flex;"><span>  Factory factory <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DialogFactory();
</span></span><span style="display:flex;"><span>  DialogA a <span style="color:#f92672">=</span> factory.<span style="color:#a6e22e">createDialog</span>(DialogA.<span style="color:#a6e22e">class</span>);
</span></span><span style="display:flex;"><span>  a.<span style="color:#a6e22e">show</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="抽象工厂模式">抽象工厂模式</h2>
<ul>
<li>角色
<ul>
<li>抽身产品接口</li>
<li>具体产品类</li>
<li>抽象工厂类</li>
<li>具体工厂类：每一个产品不同组成不同具体工厂</li>
</ul>
</li>
<li>面向接口编程，但是工厂类过多，不易拓展</li>
</ul>
<h2 id="策略模式">策略模式</h2>
<ul>
<li>角色
<ul>
<li>策略的抽象</li>
<li>具体的策略实现</li>
<li>操作策略的具体实现</li>
</ul>
</li>
<li>代码</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">//策略抽象接口</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">CalculateStrategy</span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">calculatePrice</span>(<span style="color:#66d9ef">int</span> km);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">//具体策略</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BusStrategy</span> <span style="color:#66d9ef">implements</span> CalculateStrategy{
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">calculatePrice</span>(<span style="color:#66d9ef">int</span> km){
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> busPrice;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//Context角色</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Context</span>{
</span></span><span style="display:flex;"><span> 	<span style="color:#66d9ef">private</span> CalculateStrategy cs;
</span></span><span style="display:flex;"><span>  	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">seCalculateStrategy</span>(CalculateStrategy cs){
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">cs</span> <span style="color:#f92672">=</span> cs;
</span></span><span style="display:flex;"><span>  	}
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">calculatePrice</span>(<span style="color:#66d9ef">int</span> km){
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> cs.<span style="color:#a6e22e">calculatePrice</span>(km);
</span></span><span style="display:flex;"><span>  	}
</span></span><span style="display:flex;"><span>  	
</span></span><span style="display:flex;"><span>  	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args){
</span></span><span style="display:flex;"><span>      Context context <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Context();
</span></span><span style="display:flex;"><span>      context.<span style="color:#a6e22e">setCalculateStrategy</span>(<span style="color:#66d9ef">new</span> BusStrategy());
</span></span><span style="display:flex;"><span>      context.<span style="color:#a6e22e">calculatePrice</span>(15);
</span></span><span style="display:flex;"><span>  	}
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="状态模式">状态模式</h2>
<ul>
<li>角色
<ul>
<li>抽象状态类或接口：设置状态下的行为</li>
<li>具体状态类或接口：不同状态不同行为</li>
<li>Context环境类</li>
</ul>
</li>
<li>代码:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">//抽象状态：定义行为</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">UserState</span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">forward</span>();
</span></span><span style="display:flex;"><span>  	
</span></span><span style="display:flex;"><span>  	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">comment</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//具体状态：已登录</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LoginedState</span> <span style="color:#66d9ef">implements</span> UserState{
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">forward</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//转发</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">comment</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//评论</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//具体状态：未登录</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LogoutState</span> <span style="color:#66d9ef">implements</span> UserState{
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">forward</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//去登陆</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">comment</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//去登陆</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">//使用</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LoginContext</span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">private</span> UserState mUserState <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LogoutState();
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">private</span> <span style="color:#a6e22e">LoginContext</span>(){}
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> LoginContext mLoginContext <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LoginContext();
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> LoginContext <span style="color:#a6e22e">getInstance</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> mLoginContext();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setState</span>(UserState userState){
</span></span><span style="display:flex;"><span>    mUserState <span style="color:#f92672">=</span> userState;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">forward</span>(){
</span></span><span style="display:flex;"><span>    mUserState.<span style="color:#a6e22e">forward</span>();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">comment</span>(){
</span></span><span style="display:flex;"><span>    mUserState.<span style="color:#a6e22e">comment</span>();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="责任链模式">责任链模式</h2>
<ul>
<li>角色
<ul>
<li>抽象处理者</li>
<li>抽象请求者</li>
<li>具体处理者</li>
<li>具体请求者</li>
</ul>
</li>
<li>代码</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">//抽象处理者</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AbstractHandler</span>{
</span></span><span style="display:flex;"><span>  protect AbstractHandler nextHandler;
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">handleRequest</span>(AbstractRequest request){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(getHandlerLevel() <span style="color:#f92672">==</span> request.<span style="color:#a6e22e">getRequestLevel</span>()){
</span></span><span style="display:flex;"><span>    	handleRequest(request);
</span></span><span style="display:flex;"><span>    }<span style="color:#66d9ef">else</span>{
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span>(nextHandler <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span>){
</span></span><span style="display:flex;"><span>        nextHandler.<span style="color:#a6e22e">handleRequest</span>(request);
</span></span><span style="display:flex;"><span>      }<span style="color:#66d9ef">else</span>{
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;All of handler can not handle the request&#34;</span>);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getHandlerLevel</span>();
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">handleRequest</span>(AbstractRequest request);
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//抽象请求者</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AbstractRequest</span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">private</span> Object obj;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">AbstractRequest</span> (Object obj){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">obj</span> <span style="color:#f92672">=</span> obj;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">getContent</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> obj;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getRequestLevel</span>();
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//具体处理者</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Handler1</span> <span style="color:#66d9ef">extends</span> AbstractHandler{
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getHandleLevel</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> 1;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">handleRequest</span>(AbstractRequest request){
</span></span><span style="display:flex;"><span>    System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;handler1 handle the request!&#34;</span><span style="color:#f92672">+</span>request.<span style="color:#a6e22e">getRequestLevel</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//具体请求者</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Request1</span> <span style="color:#66d9ef">extends</span> AbstractRequest{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Request1</span>(Object obj){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">super</span>(obj);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getReqestLevel</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> 1;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//使用</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args){
</span></span><span style="display:flex;"><span>  AbstractHandler handler1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Handler1();
</span></span><span style="display:flex;"><span>  AbstractHandler handler2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Handler2();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  handler1.<span style="color:#a6e22e">nextHandler</span> <span style="color:#f92672">=</span> handler2;
</span></span><span style="display:flex;"><span>  handler1.<span style="color:#a6e22e">handlerRequest</span>(<span style="color:#66d9ef">new</span> Request1(<span style="color:#e6db74">&#34;Request1&#34;</span>));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="解释器模式">解释器模式</h2>
<ul>
<li>角色
<ul>
<li>抽象表达式，抽象的解释方法</li>
<li>终结符表达式</li>
<li>非终结符表达式</li>
<li>环境类Context</li>
<li>客户类Client</li>
</ul>
</li>
<li>一般很少用</li>
</ul>
<h2 id="命令模式">命令模式</h2>
<ul>
<li>角色
<ul>
<li>接收者，具体逻辑</li>
<li>命令抽象接口</li>
<li>具体命令</li>
<li>请求者</li>
<li>客户端</li>
</ul>
</li>
<li>将请求封装成一个对象，从而使用不同请求把客户端参数化：取消、日志、事务</li>
</ul>
<h2 id="观察者模式">观察者模式</h2>
<ul>
<li>角色
<ul>
<li>抽象主题，被观察者Observable</li>
<li>具体主题，Concrete Observable</li>
<li>抽象观察者，Obsever</li>
<li>具体观察者</li>
</ul>
</li>
<li>对象间一种一对多的依赖关系，每当一个对象改变状态，则所有依赖于它的对象都会通知并被自动更新</li>
<li>代码：</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">//具体主题</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Website</span> <span style="color:#66d9ef">extends</span> Observable{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">postNewPublication</span>(String content){
</span></span><span style="display:flex;"><span>    setChanged();
</span></span><span style="display:flex;"><span>    notifyObserver(content);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//具体观察者</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Subscriber</span> <span style="color:#66d9ef">extends</span> Observer{
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">update</span>(observable 0,Object content){
</span></span><span style="display:flex;"><span>      System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;更新的内容是：&#34;</span><span style="color:#f92672">+</span>content);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//使用</span>
</span></span><span style="display:flex;"><span>main<span style="color:#960050;background-color:#1e0010">：</span>
</span></span><span style="display:flex;"><span>  	Website web <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Website();
</span></span><span style="display:flex;"><span>	Subscriber sub <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Subscriber();
</span></span><span style="display:flex;"><span>	web.<span style="color:#a6e22e">addObserver</span>(sub);
</span></span><span style="display:flex;"><span>	web.<span style="color:#a6e22e">postNewPublication</span>(<span style="color:#e6db74">&#34;内容更新了！&#34;</span>);
</span></span><span style="display:flex;"><span>	
</span></span></code></pre></div>
  </article>

  
  
  
<div id="gitalk-container"></div>
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script src="https://unpkg.com/md5/dist/md5.min.js"></script>
<script>
    const gitalk = new Gitalk({
        clientID: '29027f13b37b8831bea4',
        clientSecret: '5a25a3157abdda86a35db8a6fcb67273bec66f17',
        repo: 'comments',
        owner: 'justinbetter',
        admin: ['justinbetter'],
        id: MD5(location.pathname),
        distractionFreeMode: false 
    });
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('gitalk-container').innerHTML = 'Gitalk comments not available by default when the website is previewed locally.';
            return;
        }
        gitalk.render('gitalk-container');
    })();
</script>


</div>

  </main><div class="footer gradient-2">
  <div class="container footer-container ">
    <div class="row">
      <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
        <div class="footer-title">Sitemap</div>
        <ul class="list-unstyled">
            
              
                <li><a href="https://justinbetter.github.io/tags/">Tags</a></li>
              
              
                <li><a href="https://justinbetter.github.io/categories/">Categories</a></li>
              
            
            
            
            <li><a rel="alternate" type="application/rss&#43;xml" href="https://justinbetter.github.io/index.xml"><i class="fas fa-rss-square"></i> RSS Feed</a></li>
            
            
            
        </ul>
      </div>
      <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
        
        <div class="footer-title">Social</div>
        <ul class="list-unstyled">
          
          <li><a href="https://github.com/justinbetter" rel="noopener" target="_blank">GitHub</a></li>
          
        </ul>
        
      </div>
      <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
        
        <div class="footer-title">Links</div>
        <ul class="list-unstyled">
          
          <li><a href="https://github.com/justinbetter" rel="noopener" target="_blank">About Me</a></li>
          
        </ul>
        
      </div>
      <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">
        <p class="pull-right text-right">
          <small><em>Proudly powered by <a href="https://gohugo.io/" rel="noopener" target="_blank">Hugo</a></em></small><br/>
          <small>
            &copy;
            
            
              2017 -
            2026
          </small>
          
        </p>
      </div>
    </div>
  </div>
</div>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<script src="https://justinbetter.github.io/js/custom.js"></script>


</body>
</html>

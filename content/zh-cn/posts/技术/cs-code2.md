---
title: "【cs基础】编译器的普及"
date: 2017-04-02T20:00:22+08:00
draft: false
---

##编译器是什么
编译器就是一种翻译程序，一般是将高级语言编写的源代码转化成汇编或者机器码。说白了就是把我们用python,java等各种语言写的程序,翻译成计算机能看懂的二进制指令数据,以便运行.

##编译流程

> source --> 词法分析 == 各种记号Token stream
>             --> 语法分析 == 语法树
>             --> 语义分析 == 优化后的语法树
>             --> 中间代码生成 == 中间代码
>             --> 中间代码优化 == 优化后的中间代码
>             --> 目标代码生成 == 目标代码
>             --> 目标代码优化 == target program

##流程详解

1. 词法分析

		 将源代码的标识符、运算符等分割成一个个记号
  
2. 语法分析

		解析得到的一个个记号，根据语法规则生成一种抽象语法树

	[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-kaiAzFVr-1598890932828)(http://pandolia.net/tinyc/images/syntax_tree-2.png)]

3. 语义分析

		编译器开始对语法树进行一次或多次的遍历，检查程序的语义规则：变量声明、类型匹配..等

4. IR生成（中间代码，intermediate Representation）

	    一般生成的算法是一个递归的算法，递归的遍历语法树，将语法树上的一些节点替换成中间代码块，再根据特定的规则和顺序将这些中间代码块拼装起来。
	    
		为什么不直接生成目标代码？增加编译器的开发扩展性；便于对代码优化，中间代码的优化要比直接在目标代码优化难度低得多。

5. IR优化

		各种优化：
		去除冗余代码
		优化循环、算术表达式等
	
6. 目标代码生成
	
		编译器根据中间代码和目标机器架构生成目标代码。
	
7. 目标代码优化

		利用目标机器的提供的特性对目标代码做进一步的优化，如利用 CPU 的流水线，利用 CPU 的多核等，生成最终的目标代码


---
参考：http://pandolia.net/tinyc/ch6_compiler_overview.html
